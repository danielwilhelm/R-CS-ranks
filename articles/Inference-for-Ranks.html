<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Inference for Ranks • csranks</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Inference for Ranks">
<meta property="og:description" content="csranks">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-2631182-3"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-2631182-3');
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">csranks</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.1.1.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Inference-for-Ranks.html">Inference for Ranks</a>
    </li>
    <li>
      <a href="../articles/Rank-Rank-Reg.html">Inference for Rank-Rank Regressions</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/danielwilhelm/R-CS-ranks/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Inference for Ranks</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/danielwilhelm/R-CS-ranks/blob/HEAD/vignettes/Inference-for-Ranks.rmd" class="external-link"><code>vignettes/Inference-for-Ranks.rmd</code></a></small>
      <div class="hidden name"><code>Inference-for-Ranks.rmd</code></div>

    </div>

    
    
<p>The following example illustrates how the <code>csranks</code>
package can be used to quantify the statistical uncertainty in the PISA
ranking of OECD countries. It shows how to compute marginal and
simultaneous confidence sets for ranks as well as a confidence set for
the top-5 countries.</p>
<div class="section level2">
<h2 id="example-pisa-ranking">Example: PISA Ranking<a class="anchor" aria-label="anchor" href="#example-pisa-ranking"></a>
</h2>
<p>Over the past two decades, the Organisation for Economic Co-operation
and Development (OECD) have conducted the PISA test. The goal of this
test is to evaluate and compare educational systems across countries by
measuring 15-year-old school students’ scholastic performance on math,
science, and reading. Each country that participates in a given year has
to draw a sample of at least 5,000 students to be tested. Every three
years, the OECD publishes international league tables ranking countries
by their performance according to the PISA test scores.</p>
<p>In this example, we use <a href="https://www.oecd.org/pisa/data/" class="external-link">publicly available data</a> from
the 2018 PISA test to examine which countries do best and worst at math.
We restrict attention to the OECD countries.</p>
<p>First, load the package <code>csranks</code>. Second, load the data
and take a quick look at it:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/danielwilhelm/R-CS-ranks" class="external-link">csranks</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">pisa</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">pisa</span><span class="op">)</span></span>
<span><span class="co">#&gt;   jurisdiction science_score science_se reading_score reading_se math_score</span></span>
<span><span class="co">#&gt; 1    Australia      502.9646   1.795398      502.6317   1.634343   491.3600</span></span>
<span><span class="co">#&gt; 2      Austria      489.7804   2.777395      484.3926   2.697472   498.9423</span></span>
<span><span class="co">#&gt; 3      Belgium      498.7731   2.229240      492.8644   2.321973   508.0703</span></span>
<span><span class="co">#&gt; 4       Canada      517.9977   2.153651      520.0855   1.799716   512.0169</span></span>
<span><span class="co">#&gt; 5        Chile      443.5826   2.415280      452.2726   2.643766   417.4066</span></span>
<span><span class="co">#&gt; 6     Colombia      413.3230   3.052402      412.2951   3.251344   390.9323</span></span>
<span><span class="co">#&gt;    math_se</span></span>
<span><span class="co">#&gt; 1 1.939833</span></span>
<span><span class="co">#&gt; 2 2.970999</span></span>
<span><span class="co">#&gt; 3 2.262662</span></span>
<span><span class="co">#&gt; 4 2.357476</span></span>
<span><span class="co">#&gt; 5 2.415888</span></span>
<span><span class="co">#&gt; 6 2.989559</span></span></code></pre></div>
<p>The PISA study’s math scores are stored in <code>math_score</code>.
These test scores are estimated from a random sample of students from
each country. The standard errors of the scores are stored in
<code>math_se</code>. The following graph shows the raw math scores with
95% marginal confidence intervals:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">pisa</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/stats/reorder.factor.html" class="external-link">reorder</a></span><span class="op">(</span><span class="va">jurisdiction</span>,<span class="va">math_score</span>,decreasing<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span>, y<span class="op">=</span><span class="va">math_score</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_linerange.html" class="external-link">geom_errorbar</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>ymin<span class="op">=</span><span class="va">math_score</span><span class="op">-</span><span class="fl">2</span><span class="op">*</span><span class="va">math_se</span>, ymax<span class="op">=</span><span class="va">math_score</span><span class="op">+</span><span class="fl">2</span><span class="op">*</span><span class="va">math_se</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>y<span class="op">=</span><span class="st">"math score"</span>, x<span class="op">=</span><span class="st">""</span>, title<span class="op">=</span><span class="st">"2018 PISA math score for OECD countries"</span>, subtitle<span class="op">=</span><span class="st">"(with 95% marginal confidence intervals)"</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>axis.text.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>angle <span class="op">=</span> <span class="fl">45</span>, hjust <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="Inference-for-Ranks_files/figure-html/unnamed-chunk-2-1.png" width="700"></p>
<p>The function <code><a href="../reference/irank.html">irank()</a></code> can be used to produce integer
ranks based on these math scores:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">math_rank</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/irank.html">irank</a></span><span class="op">(</span><span class="va">pisa</span><span class="op">$</span><span class="va">math_score</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">pisa</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/order.html" class="external-link">order</a></span><span class="op">(</span><span class="va">math_rank</span><span class="op">)</span>,<span class="op">]</span><span class="op">)</span></span>
<span><span class="co">#&gt;    jurisdiction science_score science_se reading_score reading_se math_score</span></span>
<span><span class="co">#&gt; 19        Japan      529.1354   2.593168      503.8560   2.670974   526.9733</span></span>
<span><span class="co">#&gt; 20        Korea      519.0073   2.802762      514.0523   2.940543   525.9330</span></span>
<span><span class="co">#&gt; 9       Estonia      530.1080   1.884569      523.0170   1.842242   523.4146</span></span>
<span><span class="co">#&gt; 25  Netherlands      503.3838   2.840622      484.7837   2.650864   519.2310</span></span>
<span><span class="co">#&gt; 28       Poland      511.0356   2.607236      511.8557   2.702458   515.6479</span></span>
<span><span class="co">#&gt; 34  Switzerland      495.2763   3.004997      483.9294   3.124322   515.3147</span></span>
<span><span class="co">#&gt;     math_se</span></span>
<span><span class="co">#&gt; 19 2.471475</span></span>
<span><span class="co">#&gt; 20 3.121394</span></span>
<span><span class="co">#&gt; 9  1.743602</span></span>
<span><span class="co">#&gt; 25 2.632278</span></span>
<span><span class="co">#&gt; 28 2.602085</span></span>
<span><span class="co">#&gt; 34 2.908004</span></span></code></pre></div>
<p>Japan is ranked first (i.e., best), Korea is ranked second and so on.
Since the math scores are <strong>estimates</strong> of countries’ true
achievements, the ranks assigned to these countries are also
<strong>estimates</strong>, rather than the <strong>true</strong> ranks.
Just like the test scores, the ranks therefore also contain statistical
uncertainty. Various functions in the <code>csranks</code> package
implement methods for the quantification of this uncertainty.</p>
<div class="section level3">
<h3 id="best-populations">Best populations<a class="anchor" aria-label="anchor" href="#best-populations"></a>
</h3>
<p>First, we are interested in finding out which conutries could be
among the top-5 in terms of their <strong>true</strong> math score. The
function <code>cstaubest</code> answers this question. It requires as an
argument an estimate of the covariance matrix of the test scores. In
this example, it is reasonable to assume the estimates from the
different countries are mutually independent, so the covariance matrix
is diagonal:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">math_cov_mat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/diag.html" class="external-link">diag</a></span><span class="op">(</span><span class="va">pisa</span><span class="op">$</span><span class="va">math_se</span><span class="op">^</span><span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<p>The function <code>cstaubest</code> can then be used to compute a 95%
confidence set for the top-5:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">CS_5best</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cstaubest.html">cstaubest</a></span><span class="op">(</span><span class="va">pisa</span><span class="op">$</span><span class="va">math_score</span>, <span class="va">math_cov_mat</span>, tau <span class="op">=</span> <span class="fl">5</span>, coverage <span class="op">=</span> <span class="fl">0.95</span><span class="op">)</span></span>
<span></span>
<span><span class="va">pisa</span><span class="op">[</span><span class="va">CS_5best</span>, <span class="st">"jurisdiction"</span><span class="op">]</span></span>
<span><span class="co">#&gt;  [1] Belgium     Canada      Denmark     Estonia     Finland     Japan      </span></span>
<span><span class="co">#&gt;  [7] Korea       Netherlands Poland      Slovenia    Sweden      Switzerland</span></span>
<span><span class="co">#&gt; 37 Levels: Australia Austria Belgium Canada Chile Colombia ... United States</span></span></code></pre></div>
<p>The confidence set contains 12 countries: with probability
approximately 0.95, these 12 countries could all be among the top-5
according to their <strong>true</strong> math score. According to the
<strong>estimated</strong> test scores, the countries Japan, Korea,
Estonia, Netherlands, and Poland are the top-5 countries. However, due
to the statistical uncertainty in the ranking, there is uncertainty
about which countries are truly among the top-5. The confidence set
above shows all countries that could all be among the top-4 (with
probability approximately 95%).</p>
<p>With lower required level of confidence, the confidence set for the
top-5 shrinks:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">CS_5best_90</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cstaubest.html">cstaubest</a></span><span class="op">(</span><span class="va">pisa</span><span class="op">$</span><span class="va">math_score</span>, <span class="va">math_cov_mat</span>, tau <span class="op">=</span> <span class="fl">5</span>, coverage <span class="op">=</span> <span class="fl">0.9</span><span class="op">)</span></span>
<span></span>
<span><span class="va">pisa</span><span class="op">[</span><span class="va">CS_5best_90</span>, <span class="st">"jurisdiction"</span><span class="op">]</span></span>
<span><span class="co">#&gt;  [1] Belgium     Canada      Denmark     Estonia     Finland     Japan      </span></span>
<span><span class="co">#&gt;  [7] Korea       Netherlands Poland      Slovenia    Switzerland</span></span>
<span><span class="co">#&gt; 37 Levels: Australia Austria Belgium Canada Chile Colombia ... United States</span></span></code></pre></div>
<p>At the 90% level, we can now exclude Sweden to be among the
top-5.</p>
</div>
<div class="section level3">
<h3 id="marginal-confidence-sets">Marginal Confidence Sets<a class="anchor" aria-label="anchor" href="#marginal-confidence-sets"></a>
</h3>
<p>Now, suppose we are interested in a single country, say the United
Kingdom. We would like to learn where its true ranking may lie. A
marginal confidence set for the rank of the United Kingdom answers this
question:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">uk_i</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="va">pisa</span><span class="op">$</span><span class="va">jurisdiction</span> <span class="op">==</span> <span class="st">"United Kingdom"</span><span class="op">)</span></span>
<span><span class="va">CS_marg</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/csranks.html">csranks</a></span><span class="op">(</span><span class="va">pisa</span><span class="op">$</span><span class="va">math_score</span>, <span class="va">math_cov_mat</span>, simul<span class="op">=</span><span class="cn">FALSE</span>, indices <span class="op">=</span> <span class="va">uk_i</span>, coverage<span class="op">=</span><span class="fl">0.95</span><span class="op">)</span></span>
<span><span class="va">CS_marg</span></span>
<span><span class="co">#&gt; $L</span></span>
<span><span class="co">#&gt; [1] 7</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $rank</span></span>
<span><span class="co">#&gt; [1] 13</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $U</span></span>
<span><span class="co">#&gt; [1] 23</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; attr(,"class")</span></span>
<span><span class="co">#&gt; [1] "csranks"</span></span></code></pre></div>
<p><code>CS_marg$L</code> and <code>CSmarg$U</code> contain the lower
and upper bounds of the confidence sets for the ranks.</p>
<p>Based on the estimated math scores, we would rank the United Kingdom
at 13-th place. However, due to statistical uncertainty in the ranking,
its <strong>true</strong> rank could be anywhere between 7 and 23, with
probability approximately 95%.</p>
</div>
<div class="section level3">
<h3 id="simultaneous-confidence-sets">Simultaneous Confidence Sets<a class="anchor" aria-label="anchor" href="#simultaneous-confidence-sets"></a>
</h3>
<p>Finally, now suppose we are interested in the entire ranking of
countries, for instance because we want to draw inferences across
countries and compare their places in the ranking. Simultaneous
confidence sets for the ranks of all countries allow one to do just
that:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">CS_simul</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/csranks.html">csranks</a></span><span class="op">(</span><span class="va">pisa</span><span class="op">$</span><span class="va">math_score</span>, <span class="va">math_cov_mat</span>, simul<span class="op">=</span><span class="cn">TRUE</span>, coverage<span class="op">=</span><span class="fl">0.95</span><span class="op">)</span></span>
<span><span class="va">plotsimul</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">CS_simul</span>, popnames<span class="op">=</span><span class="va">pisa</span><span class="op">$</span><span class="va">jurisdiction</span>, </span>
<span>     title<span class="op">=</span><span class="st">"Ranking of OECD Countries by 2018 PISA Math Score"</span>, </span>
<span>     subtitle<span class="op">=</span><span class="st">"(with 95% simultaneous confidence sets)"</span><span class="op">)</span></span>
<span><span class="va">plotsimul</span></span></code></pre></div>
<p><img src="Inference-for-Ranks_files/figure-html/math_simul-1.png" width="672"></p>
<p>The graph can be saved as</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsave.html" class="external-link">ggsave</a></span><span class="op">(</span><span class="st">"mathsimul.pdf"</span>, plot<span class="op">=</span><span class="va">plotsimul</span><span class="op">)</span></span></code></pre></div>
<p>The graph shows confidence sets for all 37 OECD countries. These are
not marginal, but simultaneous confidence sets. The difference is that a
marginal confidence set for a given country covers the true rank for
that particular country with probability approximately 95%. On the other
hand, the simultaneous confidence sets in the graph contain the entire
true ranking with probability approximately 95%. That means they cover
all 37 true ranks simultaneously with the desired probability.</p>
<p>Such confidence sets allow us to draw inferences across countries and
compare their ranks. For instance, Chile, Mexico and Colombia have
confidence sets for the ranks that do not overlap with the confidence
sets of the other countries. This means, with approximately 95%, these
countries perform worse than the others. One can also see, that the
countries in the middle of the ranking cannot be ranked against each
other with. There is too much statistical uncertainty to conclude, for
instance, that Germany performs significantly worse than Korea (their
confidence sets both contain rank 7).</p>
<p>However, at lower levels of confidence, Germany’s and Korea’s
confidence sets do not overlap, so that with such lower levels of
confidence one could conclude that Korea performs significantly better
than Germany:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">CS_simul75</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/csranks.html">csranks</a></span><span class="op">(</span><span class="va">pisa</span><span class="op">$</span><span class="va">math_score</span>, <span class="va">math_cov_mat</span>, simul<span class="op">=</span><span class="cn">TRUE</span>, coverage<span class="op">=</span><span class="fl">0.75</span><span class="op">)</span></span>
<span><span class="va">plotsimul75</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">CS_simul75</span>, popnames<span class="op">=</span><span class="va">pisa</span><span class="op">$</span><span class="va">jurisdiction</span>, </span>
<span>     title<span class="op">=</span><span class="st">"Ranking of OECD Countries by 2018 PISA Math Score"</span>, </span>
<span>     subtitle<span class="op">=</span><span class="st">"(with 75% simultaneous confidence sets)"</span><span class="op">)</span></span>
<span><span class="va">plotsimul75</span></span></code></pre></div>
<p><img src="Inference-for-Ranks_files/figure-html/math_simul75-1.png" width="672"></p>
</div>
</div>
<div class="section level2">
<h2 id="references-further-documentation">References &amp; further documentation<a class="anchor" aria-label="anchor" href="#references-further-documentation"></a>
</h2>
<p><a href="https://doi.org/10.1093/restud/rdad006" class="external-link">Mogstad, Romano,
Shaikh, and Wilhelm (2023), “Inference for Ranks with Applications to
Mobility across Neighborhoods and Academic Achievements across
Countries”, forthcoming at Review of Economic Studies</a></p>
<p>Check out the documentation of individual functions at the package’s
<a href="https://danielwilhelm.github.io/R-CS-ranks/" class="external-link">website</a> and
further examples in the package’s <a href="https://github.com/danielwilhelm/R-CS-ranks/tree/master/examples" class="external-link">Github
repository</a>.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by <a href="http://www.ucl.ac.uk/~uctpdwi/" class="external-link">Daniel Wilhelm</a>, Pawel Morgen.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
